<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forgot Password</title>
</head>
<body>
    <form method="post" action="{% url 'email' %}">
{% csrf_token %}
        <input type="text" placeholder="Enter your registered email" name="mail">
        <input type="submit" name="submit">
    </form>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../../static/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../../static/img/favicon.png">
  <title>
    Forgot Password
  </title> 
  
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <link href="../../static/css/font-awesome.css" rel="stylesheet" />
  <link href="../../static/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="../../static/css/argon-design-system.css?v=1.2.0" rel="stylesheet" />
    <script>
        function check(){
            mail=$("#mail").val();
            $("#mail_error").html("");
            if(mail.length==0){
                $("#mail_error").html("Please fill ths field")
            }
            if($("#mail_error").html().length==0){
                $.ajax({
                    type:'POST',
                    url:'{% url 'forgot_validate' %}',
                    data:{
                        mail:mail,
                    },
                    success:function(response){
                        var flag = response['flag'];
                        var name = response['name'];
                        if(flag == 'no'){
                            $("#name_error").html("username or password is wrong");
                        }
                        else
                        {
                          Swal.fire({
                            icon: 'success',
                            title: 'Welcome '+name,
                            showConfirmButton: false,
                            timer: 2000
                          });
                          //alert("Login Successfull");
                            var timeDelay = 2000;           // MILLISECONDS (5 SECONDS).
                            setTimeout(Redirect, timeDelay);
                         //   $("#login-form").submit();
                        }
                    },
                    error:function(response){
                        alert(response["responseJSON"]["error"]);
                    }
                });
            }
        }
        function Redirect()
        {
          $("#login-form").submit();
        }
    </script>
</head>

<body class="login-page">

  <section class="section section-shaped section-lg" style="margin-top:-50px;">
    <div class="shape shape-style-1 bg-gradient-default">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="container pt-lg-7">
      <div class="row justify-content-center">
        <div class="col-lg-5">
          <div class="card bg-secondary shadow border-0">
            <div class="card-header bg-white pb-5">
              <div class="text-muted text-center mb-3"><small></small></div>
              <div class="btn-wrapper text-center">
                <small>Enter your registered E-mail</small>
              </div>
            </div>
            <div class="card-body px-lg-5 py-lg-5">
              <div class="text-center text-muted mb-4">
                
              </div>
              <form role="form" action="{% url 'email' %}" method="post" id="login-form">{% csrf_token %}
                <div class="form-group focused">
                    <span id="mail_error"></span>
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="ni ni-lock-circle-open"></i></span>
                    </div>
                    <input class="form-control" id="mail" placeholder="E_mail" name="mail" type="text">
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit"  onclick="check()" class="btn btn-primary my-4">Send mail</button>
                </div>
              </form>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-6">
              <a href="#" class="text-light"><small></small></a>
            </div>
            <div class="col-6 text-right">
              <a href="#" class="text-light"><small></small></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sweet Alert 2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="sweetalert2/dist/sweetalert2.all.min.js"></script>
  <!-- Include a polyfill for ES6 Promises (optional) for IE11 -->
  <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.js"></script>
  <script src="sweetalert2/dist/sweetalert2.min.js"></script>
 

  <!--   Core JS Files   -->
  <script src="../../static/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="../../static/js/core/popper.min.js" type="text/javascript"></script>
  <script src="../../static/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script src="../../static/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
  <script src="../../static/js/plugins/bootstrap-switch.js"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="../../static/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <script src="../../static/js/plugins/moment.min.js"></script>
  <script src="../../static/js/plugins/datetimepicker.js" type="text/javascript"></script>
  <script src="../../static/js/plugins/bootstrap-datepicker.min.js"></script>
  <!-- Control Center for Argon UI Kit: parallax effects, scripts for the example pages etc -->
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <script src="../../static/js/argon-design-system.min.js?v=1.2.0" type="text/javascript"></script>
  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
  <script>
    window.TrackJS &&
      TrackJS.install({
        token: "ee6fab19c5a04ac1a32a645abde4613a",
        application: "argon-design-system-pro"
      });
  </script>
</body>

</html>
